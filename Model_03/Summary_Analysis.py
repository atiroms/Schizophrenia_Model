###############
# DESCRIPTION #
###############

# python code to analyze tensorflow summary files generated by meta-RL program


##############
# PARAMETERS #
##############

data_path = './saved_data/20180920_130605/summary'

#############
# LIBRARIES #
#############

import numpy as np
import pandas as pd
import tensorflow as tf
#import matplotlib.pyplot as plt
import plotly as py
import cufflinks as cf
import glob
import os


################
# DATA_LOADING #
################

data_paths = glob.glob(os.path.join(data_path, "*", "event*"))

for p in data_paths:
    for e in tf.train.summary_iterator(p):
        if e.step==0:
            colnames=['Simulation/Global Episode Count']+[v.tag for v in e.summary.value]
            df=pd.DataFrame(columns=colnames)
        data=[e.step]+[v.simple_value for v in e.summary.value]
        df.loc[int(e.step)]=data


#################
# VISUALIZATION #
#################

#cf.set_config_file(offline=True, theme="white", offline_show_link=False)
#cf.go_offline()

#df.plot(x='Simulation/Global Episode Count', y='Performance/Reward')
#plt.show()

#df.iplot(kind="scatter", mode='markers', x='Simulation/Global Episode Count', y='Performance/Reward')


fig = df.iplot(kind="scatter",  asFigure=True,x='Simulation/Global Episode Count', y='Performance/Reward')
py.offline.plot(fig, filename='example_scatter')
